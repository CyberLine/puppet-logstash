HOSTS:
  debian-10:
    roles: [agent, database, dashboard, master]
    platform: debian-10-amd64
    image: debian:buster-backports
    hypervisor: docker
    docker_cmd: '["/sbin/init"]'
    docker_image_commands:
      - rm /lib/systemd/system/systemd*udev*
      - rm /lib/systemd/system/getty.target
      - wget -qO - https://adoptopenjdk.jfrog.io/adoptopenjdk/api/gpg/key/public | apt-key add -
      - echo "deb https://adoptopenjdk.jfrog.io/adoptopenjdk/deb stretch main" | tee /etc/apt/sources.list.d/adoptopenjdk.list
      - apt-get update
      - apt-get install -yq ruby ruby-dev lsb-release wget net-tools libaugeas-dev libaugeas-ruby ntpdate locales-all logrotate
      - apt-get install -yq -t buster-backports adoptopenjdk-8-hotspot ca-certificates-java
      - REALLY_GEM_UPDATE_SYSTEM=1 gem update --system --no-ri --no-rdoc
    docker_preserve_image: true

CONFIG:
  type: foss
  :trace_limit: 100  # Get more than 10 lines of trace when something fails.
